(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fdab82a"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,n){var l=s(),o=e-l,r=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=r;var s=Math.easeInOutQuad(u,l,o,t);a(s),u<t?i(e):n&&"function"===typeof n&&n()};c()}},"6ee8":function(e,t,n){},9152:function(e,t,n){"use strict";n("6ee8")},af82:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"app-container"},[n("div",{staticClass:"sub-navbar draft",staticStyle:{"z-index":"10",height:"50px"}},[n("el-input",{staticStyle:{width:"40%","margin-right":"10px"},attrs:{placeholder:"请输入搜索的用户名"},model:{value:e.input_search,callback:function(t){e.input_search=t},expression:"input_search"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[n("el-option",{attrs:{label:"ID",value:1}}),n("el-option",{attrs:{label:"昵称",value:2}}),n("el-option",{attrs:{label:"用户名",value:3}}),n("el-option",{attrs:{label:"邮箱",value:4}})],1),n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserName},slot:"append"})],1),n("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:function(t){return e.deleteFileOrDirectory(e.sels)}}},[e._v(" 批量删除")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[n("el-table-column",{attrs:{type:"selection",width:"45"}}),n("el-table-column",{attrs:{align:"center",label:"ID",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.id))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"头像",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"60px"},attrs:{src:e.row.pic}})]}}])}),n("el-table-column",{attrs:{"min-width":"100px",label:"昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{width:"120px",align:"center",label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.username))])]}}])}),n("el-table-column",{attrs:{width:"180px",align:"center",label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.email))])]}}])}),n("el-table-column",{attrs:{width:"120px",align:"center",label:"余额"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.balance))])]}}])}),n("el-table-column",{attrs:{width:"60px",align:"center",label:"积分"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(null!=t.row.integral?t.row.integral:0))])]}}])}),n("el-table-column",{attrs:{width:"100px",align:"center",label:"生日"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.dateFormat("YYYY-mm-dd",t.row.birthday)))])]}}])}),n("el-table-column",{attrs:{width:"170px",align:"center",label:"登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.dateFormat("YYYY-mm-dd HH:MM:SS",t.row.login_time)))])]}}])}),n("el-table-column",{attrs:{width:"170px",align:"center",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.dateFormat("YYYY-mm-dd HH:MM:SS",t.row.created_at)))])]}}])}),n("el-table-column",{attrs:{width:"100px",align:"center",label:"登录IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.login_ip))])]}}])}),n("el-table-column",{attrs:{width:"100px",align:"center",label:"注册IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.reg_ip))])]}}])}),n("el-table-column",{attrs:{width:"180px",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.edit(t.row.id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger"},on:{click:function(n){return e.deluser(t.row.id)}}},[e._v("删除")])],1)]}}])})],1),n("el-dialog",{attrs:{title:"修改用户信息",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.id_loading,expression:"id_loading"}]},[n("el-form",{ref:"form",attrs:{model:e.userinfo,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"昵称"}},[n("el-input",{model:{value:e.userinfo.name,callback:function(t){e.$set(e.userinfo,"name",t)},expression:"userinfo.name"}})],1),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{disabled:""},model:{value:e.userinfo.username,callback:function(t){e.$set(e.userinfo,"username",t)},expression:"userinfo.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:e.userinfo.password,callback:function(t){e.$set(e.userinfo,"password",t)},expression:"userinfo.password"}})],1),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{model:{value:e.userinfo.email,callback:function(t){e.$set(e.userinfo,"email",t)},expression:"userinfo.email"}})],1),n("el-form-item",{attrs:{label:"手机"}},[n("el-input",{model:{value:e.userinfo.phone,callback:function(t){e.$set(e.userinfo,"phone",t)},expression:"userinfo.phone"}})],1),n("el-form-item",{attrs:{label:"余额"}},[n("el-input",{model:{value:e.userinfo.price,callback:function(t){e.$set(e.userinfo,"price",t)},expression:"userinfo.price"}})],1),n("el-form-item",{attrs:{label:"积分"}},[n("el-input",{model:{value:e.userinfo.integral,callback:function(t){e.$set(e.userinfo,"integral",t)},expression:"userinfo.integral"}})],1),n("el-form-item",{attrs:{label:"用户头像"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/upload_userpic","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.userinfo.pic?n("img",{staticClass:"avatar",attrs:{src:e.userinfo.pic,width:"80px"}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeUser(e.userinfo.id)}}},[e._v("提 交")])],1)]),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)])},a=[],s=(n("d3b7"),n("25f0"),n("ac1f"),n("4d63"),n("5319"),n("4d90"),n("b0c0"),n("c24f")),l=n("333d"),o={name:"UserList",components:{Pagination:l["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{list:null,userinfo:{id:"",name:"",username:"",email:"",password:"",balance:"",pic:"",phone:"",integral:"",price:""},total:0,listLoading:!0,id_loading:!1,listQuery:{page:1,limit:20},dialogTableVisible:!1,sels:[],input_search:"",select:1}},created:function(){this.getList()},methods:{getUserName:function(){var e=this;this.listLoading=!0,Object(s["a"])(this.select,this.input_search,this.listQuery).then((function(t){e.list=t.data,e.total=t.counts,e.listLoading=!1}))},dateFormat:function(e,t){var n="";t=new Date(t);var i={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var a in i)n=new RegExp("("+a+")").exec(e),n&&(e=e.replace(n[1],1==n[1].length?i[a]:i[a].padStart(n[1].length,"0")));return e},deluser:function(e){var t=this;this.listLoading=!0,Object(s["d"])(e).then((function(e){t.getList(),200==e.status?t.$message.success(e.msg):t.$message.error(e.msg),t.listLoading=!1}))},edit:function(e){var t=this;this.id_loading=!0,this.dialogTableVisible=!0,Object(s["f"])(e).then((function(e){t.userinfo.id=e.userinfo.id,t.userinfo.name=e.userinfo.name,t.userinfo.username=e.userinfo.username,t.userinfo.email=e.userinfo.email,t.userinfo.password=e.userinfo.password,t.userinfo.balance=e.userinfo.balance,t.userinfo.pic=e.userinfo.pic,t.userinfo.phone=e.userinfo.phone,t.userinfo.integral=e.userinfo.integral,t.userinfo.price=e.userinfo.balance,t.id_loading=!1}))},getList:function(){var e=this;this.listLoading=!0,Object(s["g"])(this.listQuery).then((function(t){e.list=t.data,e.total=t.count,e.listLoading=!1}))},handleAvatarSuccess:function(e,t){this.userinfo.pic=e.files.file},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n="image/png"===e.type;return t||n||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),t||n},changeUser:function(e){var t=this;Object(s["e"])(this.userinfo.id,this.userinfo.username,this.userinfo.password,this.userinfo.email,this.userinfo.name,this.userinfo.phone,this.userinfo.price,this.userinfo.integral,this.userinfo.pic).then((function(e){200==e.status?(t.getList(),t.$message.success(e.msg)):t.$message.error(e.msg),t.listLoading=!1}))},selsChange:function(e){this.sels=e},deleteFileOrDirectory:function(e){var t=this;this.$confirm("此操作将永久删除选中的用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t.sels).then((function(e){t.listLoading=!1,200==e.status&&(t.$message.success(e.msg),t.getList())}))}))}}},r=o,u=(n("9152"),n("2877")),c=Object(u["a"])(r,i,a,!1,null,"750847ee",null);t["default"]=c.exports}}]);